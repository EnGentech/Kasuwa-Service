{% extends "basic.html" %}

{% block header %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/shopping_cart.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='styles/order.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='styles/billingAddress.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='styles/addressList.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='styles/placeOrder.css') }}">
<script src="{{ url_for('static', filename='scripts/cart.js') }}"></script>
<script src="{{ url_for('static', filename='scripts/order.js') }}"></script>
<script src="{{ url_for('static', filename='scripts/addressList.js') }}"></script>
<script src="{{ url_for('static', filename='scripts/billingAddress.js') }}"></script>
<script src="{{ url_for('static', filename='scripts/placeOrder.js') }}"></script>
{% endblock %}

{% block content %}

<div class="addcard">
    <div class="cardDetails">
        <div class="cardReview">
            
        </div>
    </div>
</div>

<div class="placeOrders">
    <div class="placeOrderDisplay">
        <div class="placeOrderContent">
            <div class="headContent">
                <h2 id="closePlaceOrder">x</h2>
                <h4>Payment Methods</h4>

                <p id="safewithus"><img id='safeConfirm' src="{{ url_for('static', filename='images/Payment_channel/confrim.png') }}" alt="">
                    Your payment information is safe with us
                </p>
                <div class="centa">
                    <div class="selection">
                        <input type="radio" name="paymentMethod" id="paymentMethod">
                        <div class="others">
                            <p>
                                <i class="fa-solid fa-credit-card" style="color: #50555e;"></i> &nbsp; Add a new card
                            </p>
                            <div class="cards">
                                <img src="{{ url_for('static', filename='images/Payment_channel/visa.png') }}" alt="">
                                <img src="{{ url_for('static', filename='images/Payment_channel/mastercard.png') }}" alt="">
                                <img src="{{ url_for('static', filename='images/Payment_channel/jcb.png') }}" alt="" id="dim">
                                <img src="{{ url_for('static', filename='images/Payment_channel/greencard.png') }}" alt="" id="dim">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


{% if addresses %}
<p id="yes" style="display: none;">{{ addresses|length }}</p>
{% endif %}

    <div id='useClass' class="">
        <div class="centerbillingAddress"> 
            <div id='load' class="loading">
                <i class="fa-solid fa-spinner fa-spin-pulse" style="color: #048b38;"></i>
            </div> 
            <div class="contentPage">
                
                <div class="ctrl">
                    <h2 id="closeBillingAddress">x</h2>
                </div>
                <h3>Add New Address</h3>
                <div class="fillme">
                    <form id='myform' action="">
                        <h4>Country/Region</h4>
                        <select name="nationality" id="">
                            <option value="" selected>Select your Country</option>
                            <option value="afghan">Afghan</option>
                            <option value="albanian">Albanian</option>
                            <option value="algerian">Algerian</option>
                            <option value="american">American</option>
                            <option value="nigeria">Nigeria</option>
                        </select><br><br>
                        <h4>Personal Information</h4>
                        <input class='fifmax' placeholder="contact name*" name='contactName' required type="text">
                        <input class="in" type="text" value="+234">
                        <input type="number" name="phoneNumber" required, placeholder="Mobile Number*" style="width: 37%; margin-left: 80px;">
                        <p style="margin: 2px; font-size: small; color: grey">please enter a contact name</p>
        
                        <h4 style="margin-top: 18px;">Address</h4>
                        <input class='fifmax' placeholder="Street, house/apartment/unit*" name='address' required type="text">
                        <input name='suits' style="margin-left: 15px;" class='fifmax' placeholder="Apt,Suit,Unit,etc. (Optional)" name='name' type="text">
                        <br><br><br>
                        <div class="selectOption">
                            <select class="selectList" name="state" id="">
                                <option value="" selected>Select your State</option>
                                <option value='abia'>Abia</option>
                                <option value='adamawa'>Adamawa</option>
                                <option value='akwaibom'>Akwa Ibom</option>
                                <option value='anambra'>Anambra</option>
                                <option value="abuja">Abuja</option>
                            </select><br><br>
                            <select class="selectList" name="lga" id="">
                                <option value="" selected>Select your LGA</option>
                                <option value='abaji'>Abaji</option>
                                <option value='amuwo-odofin'>Abuja Municipal Area Council (AMAC)</option>
                                <option value='gwagwalada'>Gwagwalada</option>
                                <option value='kwali'>Kwali</option>
                                <option value='kuje'>Kuje</option>
                                <option value='bwari'>Bwari</option>

                            </select>
                            <input style="width: 29%" placeholder="Zip code*" name='zip' required type="text">
                        </div><br><br>
                        <input type="checkbox" name="default" id=""> <span style="color: rgb(79, 65, 65); font-size: medium;">Set as default shipping Address</span>
                    </form><br><br>
                    <div class="submitButton">
                        <button id="btn1">Confirm</button>
                        <button id="btn2">Cancel</button>
                    </div>
                </div>
            </div>
        </div>  
    </div>

    <div class="addressList">
        <div class="centerbillingAddress">  
            <div id='lod' class="loadin">
                <i class="fa-solid fa-spinner fa-spin-pulse" style="color: #048b38;"></i>
            </div> 
            <div class="contentPage">
                <div class="ctrl">
                    <h2 id="close">x</h2>
                </div>
                <div class="max">
                    <div class="addr">
                    
                        <h4>Shipping Addresses</h4>
                        {% if addresses %}
                        {% for addr in addresses %}
                        <div class="address" id="count{{ loop.index }}">
                            <div class="choice">
                                <input value='' name="choice" type="radio" class="selectedAddress">
                            </div>
                            <div class="edit">
                                <a style="text-decoration: none;" href="#"><p>Edit</p></a>
                            </div>
                            <div class="contact">
                                <p><b>{{ addr['contact_name'] }}</b> <span>{{ addr['mobile_number'] }}</span></p>
                                <p>{{ addr['address']}}</p>
                                <p>{{ addr['lga'] }}, {{ addr['state'] }}, {{ addr['nationality'] }}: {{ addr['zip_code'] }}</p>
                            </div>
                            
                        </div>
                        {% endfor %}
                        {% else %}
                            <p>No Billing Address submitted</p>
                        {% endif %}
                    </div>
                    <div class="putit">
                        <div class="submitBut">
                            <button id="btn1">Add New Address</button>
                        </div>
                    </div>
                </div>
                
            </div>
            
        </div>
     
    </div>


    <div class="orderPage">
        <div class="summary_section">
            <h2>Summary</h2>
            <h3 id="total">{{ amount }} <span style="font-size: small;"></span></h3>
            <h4>Total items cost</h4>
            <div class="payNw">
                <h3>Free</h3> 
                <h4>Shipping fee</h4>
                <h3 id='grandTotal' style="font-weight: 600; font-size: large;">{{ amount }}</h3> 
                <h4 style="font-weight: 600; font-size: large;">Total Shipping</h4>
            </div>
            <button id="placeOrder">Place Order</button>
            <small>Upon clicking "Place Order", I confirm that I have read and acknowledge
                <a id='terms' href="">all terms and policies</a>
            </small>
            <div class="empty">
                
            </div>
            <div class="logo">
                <img id='confirm' src="{{ url_for('static', filename='images/Payment_channel/confrim.png') }}" alt=""> 
                <img src="{{ url_for('static', filename='images/Logo/kasuwa_logo.png') }}">
                <p>Kasuwa keeps your information and payment safe</p>
            </div>
        </div>
        <p id="checkAddr" style="display: none;">OK</p>
       
        <div class="addresses">
            
            <h3>Shopping Address</h3>
            <div class="address">
                <a id='change'><p style="cursor: pointer;">Change</p></a>
                <div id="usedAddress">
                    No Address selected
                </div>
            </div>
        </div>       

        <div class="payMethod">
            <h3>Payment Methods</h3>
            <div class="pay">
                <a hef=""><p id='payment'>Select Payment Method</p></a>
            </div>
        </div>

        <div class="all">
        {% if myOrders %}
        {% for item in myOrders %}
        <div class="cart_items">
            <div class="select_all" id="selectOne">
                <h3>{{ item[1]['name'] }}</h3>
            </div>
            <hr>
            <div class="cart_items_description">
                <div class="cart_item_img">
                <img src="{{ url_for('static', filename='images/products/' + item[1]['type'] + '.webp') }}" alt="">
                </div>
                <div class="description">
                    <p>{{ item[1]['description'] }}</p> 
                    <p id="adjust">qty</p>                
                    <button>{{ item[1]['type'] }}</button>
                    <h3>NGN <span>{{ item[1]['naira'] }}</span>.{{ item[1]['kobo'] }}</h3>
                </div>
                <div class="cart_icons">
                    <div class="plus">
                        <p><b id="qty">{{ item[0] }}</b></p>&nbsp;
                    </div> 
                </div>
            </div>
            
        </div>
        {% endfor %}
        {% else %}
        <p>An Error has occured, please check back</p>
        {% endif %}
        </div>
    </div>    

{% endblock %}
